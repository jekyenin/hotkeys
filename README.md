# Hotkeys.js
![Hotkeys.js](http://evgenin.ru/github/images/hotkeys.png)
Плагин `hotkeys.js` позволяет добавлять на страницу обработчики для сочетаний клавиш.

## Быстрый старт
Для того что бы начать работать с плагином необходимо сделать несколько простых действий:
- Подключить скрипт на страницу
```html
<script src='hotkeys.min.js'></script>
```
- Назначить экземпляр объекта `Hotkey` переменной и добавить обработчики
```javascript
var hotkeys = new Hotkeys({
  "Ctrl+S": function(){
    // Различные штуковины, которые сработают при нажатии комбинации
  },
  "Ctrl+C": function(){
    // Другие, возможно, более интересные штуковины
  },
  "onAdd": function(){
    // срабатывает при добавлении комбинации
  },
  "onRemove": function(){
    // срабатывает при удалении комбинации
  },
  "onDone": function(){
    // срабатывает при выполнении комбинации при помощи клавиш  
  },
  "onChange": function(){
    // срабатывает при изменении комбинации   
  },
  "onTrigger": function(){
    // срабатывает при вызове функции-обработчика через метод `trigger`
  },
  "onCreate": function(){
    // срабатывает при создании экземпляра библиотеки
  },
  "onDestroy": function(){
    // срабатывает при разрушении экземпляра библиотеки
  }
});
```

## Методы 
`add` - Добавление на страницу обработчика для хоткея. Первым аргументом необходимо указать комбинацию, а вторым функцию-обработчик.
```javascript
hotkeys.add("Ctrl+S", function(){
  //Различные штуковины, которые сработают при нажатии комбинации
});
```

`trigger` - Вызов обработчика для хоткея из кода.
Данный метод позволяет вызвать функцию-обработчик из кода по комбинации, не нажимая при этом клавиш. Единственным аргументом необходимо передать комбинацию.
```javascript
hotkeys.trigger("Ctrl+S");
```
`remove` - Удаление обработчика для хоткея.
Что бы удалить обработчик комбинации клавиш со страницы нужно в метод передать комбинацию.
```javascript
hotkeys.remove("Ctrl+S");
```
`destroy` - Деактивация плагина.
Этот метод отключает обработчики событий для клавиш и не дает больше знать о себе. Удаляет все обработчики комбинаций записанные ранее.
Для того что бы возобновить работу плагина необходимо снова назначить обработчики через метод `add`.
```javascript
hotkeys.destroy();
```

## События
События устанавливаются в объекте при создании экземпляра.
  `onAdd` - срабатывает при добавлении комбинации
  `onRemove` - срабатывает при удалении комбинации
  `onDone` - срабатывает при выполнении комбинации при помощи клавиш
  `onChange` - срабатывает при изменении комбинации
  `onTrigger` - срабатывает при вызове функции-обработчика через метод `trigger`
  `onCreate` - срабатывает при создании экземпляра библиотеки
  `onDestroy` - срабатывает при разрушении экземпляра библиотеки

## Важности
- Для изменения обработчика комбинации клавиш нет необходимости вызывать метод `remove`, можно просто вызвать метод `add` с той же комбинацией, но другой функцией-обработчиком.
- Для того что бы окончательно избавиться от плагина необходимо вызвать метод `destroy` и удалить либо переназначить переменную
```javascript
delete hotkeys
//или
hotkeys = 1;
```
- Многие комбинации невозможно перехватить, например:
  - Закрытие страницы,
  - Важные браузерные комбинации,
  - Системные комбинации и т.д.
  
Политика безопасности браузеров запрещает отменять стандартные события важных комбинаций. Такие комбинации как обновление, сохранение и т.п. переназначать разрешено.

## Известные проблемы
- Если в функции используется всплывающее окно браузера (`alert`, `prompt`, `confirm`), то последующие действия скрипта не выполняются (не учитывается отпускание клавиш во время браузерного всплывающего окна). После этого плагин дает сбой и считает что та комбинация еще активна. 
